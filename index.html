<!DOCTYPE html>
<html>
  <head>
    <title>Terminal.js Demo</title>
    <style>
      body {
        background: black;
        color:      white;

        width:  100%;
        height: 100%;

        padding: 0;
        margin:  0;

        box-sizing: border-box;
      }
    </style>
    <script src="http://avgp.github.io/webcomponentsjs/webcomponents.min.js"></script>
    <link rel="import" href="fake-terminal.html">
  </head>
  <body>
    <h1>Terminal Intelligence</h1>
    <fake-terminal>root@humaticitelligence &sim; &gt;</fake-terminal>
    <script>
      var cmds = {};

      cmds.help = function() {
        var output = "<div>" +
                     "<ul>" +
                     "<li><strong>help</strong> - display this help.</li>." +
                     "<li><strong>ls</strong> - displays all files in this dir.</li>" +
                     "<li><strong>show</strong> - shows content in file.</li>" +
                     "</ul></div>";
        return output;
      };

      cmds.hello = function(args) {
        if(args.length < 2) return "<p>Hello. Why don't you tell me your name?</p>";
        return "Hello " + args[1];
      };
	  
	       cmds.ls = function(args) {
        if(args.length < 2) return "<p> secret_stuff.txt | drdinosucks.fillerinoiscool |</p>";
      };
	  
	  	       cmds.show = function(args) {
        if(args.length < 14) return "<p>Please enter full filename.</p>";
        else if(args.length = 14) return "<p>*Fillerino is the best man in the world*</p>";
		else if(args.length = 27) return "<p>*That is true!*</p>";
      };

      cmds.weather = function(args) {
        args.shift();
        var xhr = new XMLHttpRequest();
        xhr.open("get", "http://api.openweathermap.org/data/2.5/weather?units=metric&q=" + args.join(" "), false);
        xhr.send();
        if(xhr.status !== 200) return "Error :(";
        weather = JSON.parse(xhr.responseText);
        return "<p><img style=\"vertical-align: middle\" src=\"http://openweathermap.org/img/w/" +
               weather.weather[0].icon + ".png\">" +
               weather.weather[0].description + ", " +
               weather.main.temp + " &deg;C</p>"
      };

      var terminal = document.querySelector("fake-terminal");
      if(terminal.ready) terminal.commands = cmds
      else {
        document.querySelector("fake-terminal").onload = function() {
          this.commands = cmds;
        }
      }
    </script>
  </body>
</html>
